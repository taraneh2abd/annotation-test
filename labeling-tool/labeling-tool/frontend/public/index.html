<!-- index.html/ -->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Login - Image Labeling Tool</title>
<style>
body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 0; padding: 0; background: #0f172a; color: #e2e8f0; display:flex;justify-content:center;align-items:center;height:100vh; }
#loginScreen { display:flex;justify-content:center;align-items:center;flex-direction:column; }
#loginScreen input { padding:10px;margin:5px;border-radius:8px;border:none;outline:none;width:200px;text-align:center; }
#loginScreen button { margin-top:10px;padding:8px 12px;border-radius:8px;cursor:pointer; width:100px; }
#loginMsg { color:#ef4444;margin-top:8px; }
</style>
</head>
<body>
<div id="loginScreen">
  <h2 style="color:#e2e8f0;margin-bottom:20px;">Login</h2>
  <input id="loginUser" type="text" placeholder="Username" />
  <input id="loginPass" type="password" placeholder="Password" />
  <button id="loginBtn">Login</button>
  <div id="loginMsg"></div>
</div>

<script>
const API = 'http://localhost:8000';
const loginBtn = document.getElementById('loginBtn');
const loginMsg = document.getElementById('loginMsg');
const loginUser = document.getElementById('loginUser');
const loginPass = document.getElementById('loginPass');

loginBtn.addEventListener('click', async () => {
  try {
    const res = await fetch(`${API}/api/login`, {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({username: loginUser.value, password: loginPass.value})
    });
    if(!res.ok) throw new Error('Invalid username or password');
    const data = await res.json();
    localStorage.setItem('TOKEN', data.access_token);
    window.location.href = 'menu.html';
  } catch(err) {
    loginMsg.textContent = err.message;
  }
});

loginPass.addEventListener('keydown', e => { if(e.key==='Enter') loginBtn.click(); });
</script>
</body>
</html>
